{"ast":null,"code":"import { DEFAULT_FRAMERATE, initialSettings } from \"../components/settings/defaults\";\nexport function storageAvailable(type) {\n  let storage;\n\n  try {\n    storage = window[type];\n    const x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return (e instanceof DOMException && // everything except Firefox\n    e.code === 22 || // Firefox\n    e.code === 1014 || // test name field too, because code might not be present\n    // everything except Firefox\n    e.name === \"QuotaExceededError\" || // Firefox\n    e.name === \"NS_ERROR_DOM_QUOTA_REACHED\") && // acknowledge QuotaExceededError only if there's something already stored\n    storage && storage.length !== 0;\n  }\n}\nexport function getLocalSetting(key) {\n  if (storageAvailable(\"localStorage\")) {\n    return window.localStorage.getItem(key);\n  }\n}\nexport function setLocalSetting(key, value) {\n  if (storageAvailable(\"localStorage\")) {\n    window.localStorage.setItem(key, value);\n  }\n}\nexport function rehydrateLocalSettings() {\n  let checkAutoplay = getLocalSetting(\"autoplay\");\n  let checkShowFrameScrubber = getLocalSetting(\"showFrameScrubber\");\n  let showCoordinateLabels = getLocalSetting(\"showCoordinateLabels\");\n\n  if (typeof checkAutoplay === \"undefined\") {\n    checkAutoplay = initialSettings.autoplay;\n  } else {\n    checkAutoplay = checkAutoplay === \"true\";\n  }\n\n  if (typeof checkShowFrameScrubber === \"undefined\") {\n    checkShowFrameScrubber = initialSettings.showFrameScrubber;\n  } else {\n    checkShowFrameScrubber = checkShowFrameScrubber === \"true\";\n  }\n\n  if (typeof showCoordinateLabels === \"undefined\") {\n    showCoordinateLabels = initialSettings.showCoordinateLabels;\n  } else {\n    showCoordinateLabels = showCoordinateLabels === \"true\";\n  }\n\n  return {\n    frameRate: Number(getLocalSetting(\"frameRate\")) || DEFAULT_FRAMERATE,\n    theme: getLocalSetting(\"theme\") || initialSettings.theme,\n    showFrameScrubber: checkShowFrameScrubber,\n    autoplay: checkAutoplay,\n    showCoordinateLabels: showCoordinateLabels\n  };\n}","map":{"version":3,"sources":["/Users/yabu/CC/board/src/app/storage.js"],"names":["DEFAULT_FRAMERATE","initialSettings","storageAvailable","type","storage","window","x","setItem","removeItem","e","DOMException","code","name","length","getLocalSetting","key","localStorage","getItem","setLocalSetting","value","rehydrateLocalSettings","checkAutoplay","checkShowFrameScrubber","showCoordinateLabels","autoplay","showFrameScrubber","frameRate","Number","theme"],"mappings":"AAAA,SACEA,iBADF,EAEEC,eAFF,QAGO,iCAHP;AAKA,OAAO,SAASC,gBAAT,CAA0BC,IAA1B,EAAgC;AACrC,MAAIC,OAAJ;;AACA,MAAI;AACFA,IAAAA,OAAO,GAAGC,MAAM,CAACF,IAAD,CAAhB;AACA,UAAMG,CAAC,GAAG,kBAAV;AACAF,IAAAA,OAAO,CAACG,OAAR,CAAgBD,CAAhB,EAAmBA,CAAnB;AACAF,IAAAA,OAAO,CAACI,UAAR,CAAmBF,CAAnB;AACA,WAAO,IAAP;AACD,GAND,CAME,OAAOG,CAAP,EAAU;AACV,WACE,CAAEA,CAAC,YAAYC,YAAb,IACA;AACAD,IAAAA,CAAC,CAACE,IAAF,KAAW,EAFZ,IAGC;AACAF,IAAAA,CAAC,CAACE,IAAF,KAAW,IAJZ,IAKC;AACA;AACAF,IAAAA,CAAC,CAACG,IAAF,KAAW,oBAPZ,IAQC;AACAH,IAAAA,CAAC,CAACG,IAAF,KAAW,4BATb,KAUA;AACAR,IAAAA,OAXA,IAYAA,OAAO,CAACS,MAAR,KAAmB,CAbrB;AAeD;AACF;AAED,OAAO,SAASC,eAAT,CAAyBC,GAAzB,EAA8B;AACnC,MAAIb,gBAAgB,CAAC,cAAD,CAApB,EAAsC;AACpC,WAAOG,MAAM,CAACW,YAAP,CAAoBC,OAApB,CAA4BF,GAA5B,CAAP;AACD;AACF;AAED,OAAO,SAASG,eAAT,CAAyBH,GAAzB,EAA8BI,KAA9B,EAAqC;AAC1C,MAAIjB,gBAAgB,CAAC,cAAD,CAApB,EAAsC;AACpCG,IAAAA,MAAM,CAACW,YAAP,CAAoBT,OAApB,CAA4BQ,GAA5B,EAAiCI,KAAjC;AACD;AACF;AAED,OAAO,SAASC,sBAAT,GAAkC;AACvC,MAAIC,aAAa,GAAGP,eAAe,CAAC,UAAD,CAAnC;AACA,MAAIQ,sBAAsB,GAAGR,eAAe,CAAC,mBAAD,CAA5C;AAEA,MAAIS,oBAAoB,GAAGT,eAAe,CAAC,sBAAD,CAA1C;;AAEA,MAAI,OAAOO,aAAP,KAAyB,WAA7B,EAA0C;AACxCA,IAAAA,aAAa,GAAGpB,eAAe,CAACuB,QAAhC;AACD,GAFD,MAEO;AACLH,IAAAA,aAAa,GAAGA,aAAa,KAAK,MAAlC;AACD;;AAED,MAAI,OAAOC,sBAAP,KAAkC,WAAtC,EAAmD;AACjDA,IAAAA,sBAAsB,GAAGrB,eAAe,CAACwB,iBAAzC;AACD,GAFD,MAEO;AACLH,IAAAA,sBAAsB,GAAGA,sBAAsB,KAAK,MAApD;AACD;;AAED,MAAI,OAAOC,oBAAP,KAAgC,WAApC,EAAiD;AAC/CA,IAAAA,oBAAoB,GAAGtB,eAAe,CAACsB,oBAAvC;AACD,GAFD,MAEO;AACLA,IAAAA,oBAAoB,GAAGA,oBAAoB,KAAK,MAAhD;AACD;;AAED,SAAO;AACLG,IAAAA,SAAS,EAAEC,MAAM,CAACb,eAAe,CAAC,WAAD,CAAhB,CAAN,IAAwCd,iBAD9C;AAEL4B,IAAAA,KAAK,EAAEd,eAAe,CAAC,OAAD,CAAf,IAA4Bb,eAAe,CAAC2B,KAF9C;AAGLH,IAAAA,iBAAiB,EAAEH,sBAHd;AAILE,IAAAA,QAAQ,EAAEH,aAJL;AAKLE,IAAAA,oBAAoB,EAAEA;AALjB,GAAP;AAOD","sourcesContent":["import {\n  DEFAULT_FRAMERATE,\n  initialSettings\n} from \"../components/settings/defaults\";\n\nexport function storageAvailable(type) {\n  let storage;\n  try {\n    storage = window[type];\n    const x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return (\n      ((e instanceof DOMException &&\n        // everything except Firefox\n        e.code === 22) ||\n        // Firefox\n        e.code === 1014 ||\n        // test name field too, because code might not be present\n        // everything except Firefox\n        e.name === \"QuotaExceededError\" ||\n        // Firefox\n        e.name === \"NS_ERROR_DOM_QUOTA_REACHED\") &&\n      // acknowledge QuotaExceededError only if there's something already stored\n      storage &&\n      storage.length !== 0\n    );\n  }\n}\n\nexport function getLocalSetting(key) {\n  if (storageAvailable(\"localStorage\")) {\n    return window.localStorage.getItem(key);\n  }\n}\n\nexport function setLocalSetting(key, value) {\n  if (storageAvailable(\"localStorage\")) {\n    window.localStorage.setItem(key, value);\n  }\n}\n\nexport function rehydrateLocalSettings() {\n  let checkAutoplay = getLocalSetting(\"autoplay\");\n  let checkShowFrameScrubber = getLocalSetting(\"showFrameScrubber\");\n\n  let showCoordinateLabels = getLocalSetting(\"showCoordinateLabels\");\n\n  if (typeof checkAutoplay === \"undefined\") {\n    checkAutoplay = initialSettings.autoplay;\n  } else {\n    checkAutoplay = checkAutoplay === \"true\";\n  }\n\n  if (typeof checkShowFrameScrubber === \"undefined\") {\n    checkShowFrameScrubber = initialSettings.showFrameScrubber;\n  } else {\n    checkShowFrameScrubber = checkShowFrameScrubber === \"true\";\n  }\n\n  if (typeof showCoordinateLabels === \"undefined\") {\n    showCoordinateLabels = initialSettings.showCoordinateLabels;\n  } else {\n    showCoordinateLabels = showCoordinateLabels === \"true\";\n  }\n\n  return {\n    frameRate: Number(getLocalSetting(\"frameRate\")) || DEFAULT_FRAMERATE,\n    theme: getLocalSetting(\"theme\") || initialSettings.theme,\n    showFrameScrubber: checkShowFrameScrubber,\n    autoplay: checkAutoplay,\n    showCoordinateLabels: showCoordinateLabels\n  };\n}\n"]},"metadata":{},"sourceType":"module"}