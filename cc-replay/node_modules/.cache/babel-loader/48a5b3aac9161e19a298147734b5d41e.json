{"ast":null,"code":"import{DEFAULT_FRAMERATE,initialSettings}from\"../components/settings/defaults\";export function storageAvailable(type){var storage;try{storage=window[type];var x=\"__storage_test__\";storage.setItem(x,x);storage.removeItem(x);return true;}catch(e){return(e instanceof DOMException&&// everything except Firefox\ne.code===22||// Firefox\ne.code===1014||// test name field too, because code might not be present\n// everything except Firefox\ne.name===\"QuotaExceededError\"||// Firefox\ne.name===\"NS_ERROR_DOM_QUOTA_REACHED\")&&// acknowledge QuotaExceededError only if there's something already stored\nstorage&&storage.length!==0;}}export function getLocalSetting(key){if(storageAvailable(\"localStorage\")){return window.localStorage.getItem(key);}}export function setLocalSetting(key,value){if(storageAvailable(\"localStorage\")){window.localStorage.setItem(key,value);}}export function rehydrateLocalSettings(){var checkAutoplay=getLocalSetting(\"autoplay\");var checkShowFrameScrubber=getLocalSetting(\"showFrameScrubber\");var showCoordinateLabels=getLocalSetting(\"showCoordinateLabels\");if(typeof checkAutoplay===\"undefined\"){checkAutoplay=initialSettings.autoplay;}else{checkAutoplay=checkAutoplay===\"true\";}if(typeof checkShowFrameScrubber===\"undefined\"){checkShowFrameScrubber=initialSettings.showFrameScrubber;}else{checkShowFrameScrubber=checkShowFrameScrubber===\"true\";}if(typeof showCoordinateLabels===\"undefined\"){showCoordinateLabels=initialSettings.showCoordinateLabels;}else{showCoordinateLabels=showCoordinateLabels===\"true\";}return{frameRate:Number(getLocalSetting(\"frameRate\"))||DEFAULT_FRAMERATE,theme:getLocalSetting(\"theme\")||initialSettings.theme,showFrameScrubber:checkShowFrameScrubber,autoplay:checkAutoplay,showCoordinateLabels:showCoordinateLabels};}","map":{"version":3,"sources":["/home/y-yabust/CC/cc-replay/src/app/storage.js"],"names":["DEFAULT_FRAMERATE","initialSettings","storageAvailable","type","storage","window","x","setItem","removeItem","e","DOMException","code","name","length","getLocalSetting","key","localStorage","getItem","setLocalSetting","value","rehydrateLocalSettings","checkAutoplay","checkShowFrameScrubber","showCoordinateLabels","autoplay","showFrameScrubber","frameRate","Number","theme"],"mappings":"AAAA,OACEA,iBADF,CAEEC,eAFF,KAGO,iCAHP,CAKA,MAAO,SAASC,CAAAA,gBAAT,CAA0BC,IAA1B,CAAgC,CACrC,GAAIC,CAAAA,OAAJ,CACA,GAAI,CACFA,OAAO,CAAGC,MAAM,CAACF,IAAD,CAAhB,CACA,GAAMG,CAAAA,CAAC,CAAG,kBAAV,CACAF,OAAO,CAACG,OAAR,CAAgBD,CAAhB,CAAmBA,CAAnB,EACAF,OAAO,CAACI,UAAR,CAAmBF,CAAnB,EACA,MAAO,KAAP,CACD,CAAC,MAAOG,CAAP,CAAU,CACV,MACE,CAAEA,CAAC,WAAYC,CAAAA,YAAb,EACA;AACAD,CAAC,CAACE,IAAF,GAAW,EAFZ,EAGC;AACAF,CAAC,CAACE,IAAF,GAAW,IAJZ,EAKC;AACA;AACAF,CAAC,CAACG,IAAF,GAAW,oBAPZ,EAQC;AACAH,CAAC,CAACG,IAAF,GAAW,4BATb,GAUA;AACAR,OAXA,EAYAA,OAAO,CAACS,MAAR,GAAmB,CAbrB,CAeD,CACF,CAED,MAAO,SAASC,CAAAA,eAAT,CAAyBC,GAAzB,CAA8B,CACnC,GAAIb,gBAAgB,CAAC,cAAD,CAApB,CAAsC,CACpC,MAAOG,CAAAA,MAAM,CAACW,YAAP,CAAoBC,OAApB,CAA4BF,GAA5B,CAAP,CACD,CACF,CAED,MAAO,SAASG,CAAAA,eAAT,CAAyBH,GAAzB,CAA8BI,KAA9B,CAAqC,CAC1C,GAAIjB,gBAAgB,CAAC,cAAD,CAApB,CAAsC,CACpCG,MAAM,CAACW,YAAP,CAAoBT,OAApB,CAA4BQ,GAA5B,CAAiCI,KAAjC,EACD,CACF,CAED,MAAO,SAASC,CAAAA,sBAAT,EAAkC,CACvC,GAAIC,CAAAA,aAAa,CAAGP,eAAe,CAAC,UAAD,CAAnC,CACA,GAAIQ,CAAAA,sBAAsB,CAAGR,eAAe,CAAC,mBAAD,CAA5C,CAEA,GAAIS,CAAAA,oBAAoB,CAAGT,eAAe,CAAC,sBAAD,CAA1C,CAEA,GAAI,MAAOO,CAAAA,aAAP,GAAyB,WAA7B,CAA0C,CACxCA,aAAa,CAAGpB,eAAe,CAACuB,QAAhC,CACD,CAFD,IAEO,CACLH,aAAa,CAAGA,aAAa,GAAK,MAAlC,CACD,CAED,GAAI,MAAOC,CAAAA,sBAAP,GAAkC,WAAtC,CAAmD,CACjDA,sBAAsB,CAAGrB,eAAe,CAACwB,iBAAzC,CACD,CAFD,IAEO,CACLH,sBAAsB,CAAGA,sBAAsB,GAAK,MAApD,CACD,CAED,GAAI,MAAOC,CAAAA,oBAAP,GAAgC,WAApC,CAAiD,CAC/CA,oBAAoB,CAAGtB,eAAe,CAACsB,oBAAvC,CACD,CAFD,IAEO,CACLA,oBAAoB,CAAGA,oBAAoB,GAAK,MAAhD,CACD,CAED,MAAO,CACLG,SAAS,CAAEC,MAAM,CAACb,eAAe,CAAC,WAAD,CAAhB,CAAN,EAAwCd,iBAD9C,CAEL4B,KAAK,CAAEd,eAAe,CAAC,OAAD,CAAf,EAA4Bb,eAAe,CAAC2B,KAF9C,CAGLH,iBAAiB,CAAEH,sBAHd,CAILE,QAAQ,CAAEH,aAJL,CAKLE,oBAAoB,CAAEA,oBALjB,CAAP,CAOD","sourcesContent":["import {\n  DEFAULT_FRAMERATE,\n  initialSettings\n} from \"../components/settings/defaults\";\n\nexport function storageAvailable(type) {\n  let storage;\n  try {\n    storage = window[type];\n    const x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return (\n      ((e instanceof DOMException &&\n        // everything except Firefox\n        e.code === 22) ||\n        // Firefox\n        e.code === 1014 ||\n        // test name field too, because code might not be present\n        // everything except Firefox\n        e.name === \"QuotaExceededError\" ||\n        // Firefox\n        e.name === \"NS_ERROR_DOM_QUOTA_REACHED\") &&\n      // acknowledge QuotaExceededError only if there's something already stored\n      storage &&\n      storage.length !== 0\n    );\n  }\n}\n\nexport function getLocalSetting(key) {\n  if (storageAvailable(\"localStorage\")) {\n    return window.localStorage.getItem(key);\n  }\n}\n\nexport function setLocalSetting(key, value) {\n  if (storageAvailable(\"localStorage\")) {\n    window.localStorage.setItem(key, value);\n  }\n}\n\nexport function rehydrateLocalSettings() {\n  let checkAutoplay = getLocalSetting(\"autoplay\");\n  let checkShowFrameScrubber = getLocalSetting(\"showFrameScrubber\");\n\n  let showCoordinateLabels = getLocalSetting(\"showCoordinateLabels\");\n\n  if (typeof checkAutoplay === \"undefined\") {\n    checkAutoplay = initialSettings.autoplay;\n  } else {\n    checkAutoplay = checkAutoplay === \"true\";\n  }\n\n  if (typeof checkShowFrameScrubber === \"undefined\") {\n    checkShowFrameScrubber = initialSettings.showFrameScrubber;\n  } else {\n    checkShowFrameScrubber = checkShowFrameScrubber === \"true\";\n  }\n\n  if (typeof showCoordinateLabels === \"undefined\") {\n    showCoordinateLabels = initialSettings.showCoordinateLabels;\n  } else {\n    showCoordinateLabels = showCoordinateLabels === \"true\";\n  }\n\n  return {\n    frameRate: Number(getLocalSetting(\"frameRate\")) || DEFAULT_FRAMERATE,\n    theme: getLocalSetting(\"theme\") || initialSettings.theme,\n    showFrameScrubber: checkShowFrameScrubber,\n    autoplay: checkAutoplay,\n    showCoordinateLabels: showCoordinateLabels\n  };\n}\n"]},"metadata":{},"sourceType":"module"}