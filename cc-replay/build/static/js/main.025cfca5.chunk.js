(this["webpackJsonpbattlesnake-board"]=this["webpackJsonpbattlesnake-board"]||[]).push([[0],{12:function(e,t,n){e.exports={info:"SettingsPage_info__hnKuB",inputContainer:"SettingsPage_inputContainer__OMy_9",row:"SettingsPage_row__FjkX8",centered:"SettingsPage_centered__2a9Zh",checkmark:"SettingsPage_checkmark__1GbZH",radio:"SettingsPage_radio__2oWfC"}},33:function(e,t,n){var r,a,i;a=[],void 0===(i="function"===typeof(r=function(){if("WebSocket"in window)return e.prototype.onopen=function(e){},e.prototype.onclose=function(e){},e.prototype.onconnecting=function(e){},e.prototype.onmessage=function(e){},e.prototype.onerror=function(e){},e.debugAll=!1,e.CONNECTING=WebSocket.CONNECTING,e.OPEN=WebSocket.OPEN,e.CLOSING=WebSocket.CLOSING,e.CLOSED=WebSocket.CLOSED,e;function e(t,n,r){var a={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3,maxReconnectAttempts:null,binaryType:"blob"};for(var i in r||(r={}),a)"undefined"!==typeof r[i]?this[i]=r[i]:this[i]=a[i];this.url=t,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var c,s=this,o=!1,u=!1,l=document.createElement("div");function d(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}l.addEventListener("open",(function(e){s.onopen(e)})),l.addEventListener("close",(function(e){s.onclose(e)})),l.addEventListener("connecting",(function(e){s.onconnecting(e)})),l.addEventListener("message",(function(e){s.onmessage(e)})),l.addEventListener("error",(function(e){s.onerror(e)})),this.addEventListener=l.addEventListener.bind(l),this.removeEventListener=l.removeEventListener.bind(l),this.dispatchEvent=l.dispatchEvent.bind(l),this.open=function(t){if((c=new WebSocket(s.url,n||[])).binaryType=this.binaryType,t){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else l.dispatchEvent(d("connecting")),this.reconnectAttempts=0;(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",s.url);var r=c,a=setTimeout((function(){(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",s.url),u=!0,r.close(),u=!1}),s.timeoutInterval);c.onopen=function(n){clearTimeout(a),(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onopen",s.url),s.protocol=c.protocol,s.readyState=WebSocket.OPEN,s.reconnectAttempts=0;var r=d("open");r.isReconnect=t,t=!1,l.dispatchEvent(r)},c.onclose=function(n){if(clearTimeout(a),c=null,o)s.readyState=WebSocket.CLOSED,l.dispatchEvent(d("close"));else{s.readyState=WebSocket.CONNECTING;var r=d("connecting");r.code=n.code,r.reason=n.reason,r.wasClean=n.wasClean,l.dispatchEvent(r),t||u||((s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onclose",s.url),l.dispatchEvent(d("close")));var a=s.reconnectInterval*Math.pow(s.reconnectDecay,s.reconnectAttempts);setTimeout((function(){s.reconnectAttempts++,s.open(!0)}),a>s.maxReconnectInterval?s.maxReconnectInterval:a)}},c.onmessage=function(t){(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",s.url,t.data);var n=d("message");n.data=t.data,l.dispatchEvent(n)},c.onerror=function(t){(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onerror",s.url,t),l.dispatchEvent(d("error"))}},1==this.automaticOpen&&this.open(!1),this.send=function(t){if(c)return(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","send",s.url,t),c.send(t);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,t){"undefined"==typeof e&&(e=1e3),o=!0,c&&c.close(e,t)},this.refresh=function(){c&&c.close()}}})?r.apply(t,a):r)||(e.exports=i)},36:function(e,t,n){e.exports={game:"GamePage_game__3S4Mj"}},37:function(e,t,n){e.exports={labels:"PlaybackSpeed_labels__3XxZA"}},50:function(e,t,n){},51:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(23),c=n(16),s=n(5),o=n(4);function u(e){var t=e.split("=");return{key:t[0],value:void 0===t[1]||decodeURIComponent(t[1])}}function l(e){if(!e)return"";var t="?",n="";for(var r in e){var a=e[r];n+="".concat(t).concat(r,"=").concat(a),t="&"}return n}function d(e){var t={http:"ws",https:"wss"};for(var n in t){var r=t[n];if(e.substr(0,n.length+1)===n+":")return r+e.substr(n.length)}throw new Error("Invalid URL: "+e)}function h(){function e(e,t){var n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,"");return""===n?r:""===r?n:"".concat(n,"/").concat(r)}for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(t,n){return e(t,n)}),"")}var p=n(8),f=n(9),b=n(11),m=n(10),g=n(6),j=n(3),v=n(0),O=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{children:"ERROR: Specify a gameid"})}}]),n}(a.a.Component),x="#f1f1f1",y="#D6D5EA",w="#ff5c75",k="#000000",S="0.3",_="#AAAAAA",E="#fefefe",C="#888",T="#6f42c1",L="#efefef",F="#424242",N="#6f42c1",A="#fff",R="#dc3545",H="#f8f9fa",P="576px",M="768px",z="992px",I="1650px",G="dark",W="light",B=Object(j.a)("div")({display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%"}),D=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return Object(v.jsx)(B,{children:Object(v.jsxs)("div",{className:"la-ball-grid-beat la-dark la-2x",style:{color:w},children:[Object(v.jsx)("div",{}),Object(v.jsx)("div",{}),Object(v.jsx)("div",{}),Object(v.jsx)("div",{}),Object(v.jsx)("div",{}),Object(v.jsx)("div",{}),Object(v.jsx)("div",{}),Object(v.jsx)("div",{}),Object(v.jsx)("div",{})]})})}}]),n}(a.a.Component),X=Object(j.a)("div")({display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%"}),Y=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return Object(v.jsx)(X,{children:Object(v.jsx)("h2",{style:{color:w},children:"Game no longer available, sorry!"})})}}]),n}(a.a.Component),V=n(22),U=20,K=(U/3.25).toFixed(2),q=.1,Q=["up","right","down","left"],J=0;function Z(e){return 24*e+4}function $(e){return 24*(J-1-e)+4}function ee(e){var t="left"===e.direction||"right"===e.direction?8:0;return U+t}function te(e){var t="up"===e.direction||"down"===e.direction?8:0;return U+t}function ne(e){var t="left"===e.direction||"right"===e.direction?-4:0;return Z(e.x)+t}function re(e){var t="up"===e.direction||"down"===e.direction?-4:0;return $(e.y)+t}function ae(e,t){return Z(e.x)-4}function ie(e,t){return $(e.y)-4}function ce(e){switch(e.direction){case"left":return Z(e.x+1)-4-q;case"right":return Z(e.x)-4-q;default:return Z(e.x)}}function se(e){switch(e.direction){case"up":return $(e.y-1)-4-q;case"down":return $(e.y)-4-q;default:return $(e.y)}}function oe(e){switch(e.direction){case"right":return Z(e.x+1)-4-q;case"left":return Z(e.x)-4-q;default:return Z(e.x)}}function ue(e){switch(e.direction){case"down":return $(e.y-1)-4-q;case"up":return $(e.y)-4-q;default:return $(e.y)}}function le(e){return"left"===e.direction||"right"===e.direction?4.2:U}function de(e){return"left"===e.direction||"right"===e.direction?U:4.2}function he(e,t){if(e.isDead){if(t)return e._id===t?1:0}else if(t)return e._id===t?1:.15;return e.isDead?.1:1}function pe(e){return e.shadeForOverlap?.8:e.isOverlapped?.3:1}function fe(e,t){return t.shadeForOverlap?_:e.color}function be(e){for(var t=[],n=0;n<e;n++)t.push(n);return t}function me(e,t){if(0===t||t===e.body.length-1)return!1;var n,r,a=e.body[t+1],i=e.body[t];return(a.x!==i.x||a.y!==i.y)&&(n=i.direction,r=a.direction,Math.abs(Q.indexOf(n)-Q.indexOf(r))%2===1)}function ge(e,t){var n=e.body[e.body.length-1];return t.isOverlapped&&n.x===t.x&&n.y===t.y}var je=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"renderPart",value:function(e,t,n,r){if(!ge(e,n))switch(n.type){case"head":return this.renderHeadPart(e,t,n);case"tail":return this.renderTailPart(e,t,n);default:return me(e,r)?this.renderCornerPart(e,t,n,r):this.renderMiddlePart(e,t,n,r)}}},{key:"renderHeadPart",value:function(e,t,n){var r=function(e){switch(e.direction){case"left":return Z(e.x)+q;case"right":return Z(e.x)-q;default:return Z(e.x)}}(n),a=function(e){switch(e.direction){case"up":return $(e.y)+q;case"down":return $(e.y)-q;default:return $(e.y)}}(n),i=e.headSvg.viewBox.baseVal,c=function(e,t){var n=t.width/2,r=t.height/2;switch(e){case"left":return"scale(-1,1) translate(-100, 0)";case"up":return"rotate(-90 ".concat(n," ").concat(r,")");case"down":return"rotate(90 ".concat(n," ").concat(r,")");default:return""}}(n.direction,i),s="".concat(i.x," ").concat(i.y," ").concat(i.width," ").concat(i.height),o=fe(e,n),u=pe(n);return Object(v.jsxs)("g",{children:[Object(v.jsx)("svg",{viewBox:s,x:r,y:a,width:U,height:U,fill:o,opacity:u,shapeRendering:"auto",children:Object(v.jsx)("g",{transform:c,dangerouslySetInnerHTML:{__html:e.headSvg.innerHTML}})}),e.effectiveSpace>1&&Object(v.jsx)("rect",{x:ce(n),y:se(n),width:le(n),height:de(n),fill:o,opacity:u,shapeRendering:"auto"})]},"part"+t+",head")}},{key:"renderMiddlePart",value:function(e,t,n,r){var a=fe(e,n),i=pe(n);return Object(v.jsx)("rect",{x:ne(n),y:re(n),width:ee(n),height:te(n),fill:a,opacity:i,shapeRendering:"auto"},"part".concat(t,",").concat(n.x,",").concat(n.y))}},{key:"renderCornerPart",value:function(e,t,n,r){var a,i=fe(e,n),c=pe(n);var s=function(e,t){if(0===t||t===e.body.length-1)return!1;var n=e.body[t+1],r=e.body[t];return"".concat(r.direction," ").concat(n.direction)}(e,r);switch(s){case"down left":case"right up":a="rotate(270, 70, 70)";break;case"left down":case"up right":a="rotate(90, 70, 70)";break;case"left up":case"down right":break;case"right down":case"up left":a="rotate(180, 70, 70)"}return Object(v.jsx)("svg",{x:ae(n),y:ie(n),width:28,height:28,fill:i,opacity:c,viewBox:"0 0 140 140",shapeRendering:"auto",children:Object(v.jsx)("path",{d:"M0,20 h60 a60,60 0 0 1 60,60 v60 h-100 v-20 h-20 z",transform:a})},"part".concat(t,",").concat(n.x,",").concat(n.y))}},{key:"renderTailPart",value:function(e,t,n){var r=function(e){switch(e.direction){case"left":return Z(e.x)-q;case"right":return Z(e.x)+q;default:return Z(e.x)}}(n),a=function(e){switch(e.direction){case"up":return $(e.y)-q;case"down":return $(e.y)+q;default:return $(e.y)}}(n),i=e.tailSvg.viewBox.baseVal,c=function(e,t){var n=t.width/2,r=t.height/2;switch(e){case"right":return"scale(-1,1) translate(-100,0)";case"down":return"scale(-1,1) translate(-100,0) rotate(-90 ".concat(n," ").concat(r,")");case"up":return"scale(-1,1) translate(-100,0) rotate(90 ".concat(n," ").concat(r,")");default:return""}}(n.direction,i),s="".concat(i.x," ").concat(i.y," ").concat(i.width," ").concat(i.height),o=fe(e,n),u=pe(n);return Object(v.jsxs)("g",{children:[Object(v.jsx)("svg",{viewBox:s,x:r,y:a,width:U,height:U,fill:o,opacity:u,shapeRendering:"auto",children:Object(v.jsx)("g",{transform:c,dangerouslySetInnerHTML:{__html:e.tailSvg.innerHTML}})}),e.effectiveSpace>1&&Object(v.jsx)("rect",{x:oe(n),y:ue(n),width:le(n),height:de(n),fill:o,opacity:u,shapeRendering:"auto"})]},"part"+t+",tail")}},{key:"renderLabel",value:function(e,t,n){return Object(v.jsx)("foreignObject",{x:Z(t),y:$(e),width:U,height:U,children:Object(v.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",opacity:.5},children:Object(v.jsx)("div",{style:{fontSize:"80%"},children:n})})},"label"+e+t)}},{key:"renderLabels",value:function(){var e=this;return Object(v.jsxs)(v.Fragment,{children:[be(this.props.rows).map((function(t,n){return e.renderLabel(n,-1,n)})),be(this.props.columns).map((function(t,n){return e.renderLabel(-1,n,n)}))]})}},{key:"renderGrid",value:function(){var e=this;J=this.props.rows;var t,n,r=this.props.snakes||[],a=this.props.food||[],i=this.props.hazards||[],c=(t=r,n=this.props.highlightedSnake,t.concat().sort((function(e,t){var r=e.isDead?0:1,a=t.isDead?0:1;return e._id===n&&(r=2),t._id===n&&(a=2),r-a})));if(!this.props.highlightedSnake){for(var s=Array(this.props.rows),o=0;o<s.length;o++){s[o]=Array(this.props.columns);for(var u=0;u<this.props.columns;u++)s[o][u]=!1}for(var l=0;l<c.length;l++){var d=c[l];if(!d.isDead)for(var h=0;h<d.body.length;h++){var p=d.body[h];ge(d,p)||(s[p.y][p.x]?p.shadeForOverlap=!0:s[p.y][p.x]=!0)}}}var f=24*this.props.columns+4,b=24*this.props.rows+4,m=parseFloat(S),g=this.props.showCoordinateLabels?"visible":"hidden";return Object(v.jsxs)("svg",{className:"grid",width:this.props.maxWidth,height:this.props.maxHeight,x:this.props.x,y:this.props.y,viewBox:"0 0 ".concat(f," ").concat(b),overflow:g,children:[this.props.showCoordinateLabels&&this.renderLabels(),be(this.props.rows).map((function(t,n){return be(e.props.columns).map((function(t,r){return Object(v.jsx)("rect",{x:Z(r),y:$(n),width:U,height:U,fill:e.props.theme===G?y:x,shapeRendering:"auto"},"cell"+n+","+r)}))})),c.map((function(t,n){return Object(v.jsx)("g",{className:"snake",opacity:he(t,e.props.highlightedSnake),children:Object(V.a)(t.body).reverse().map((function(r,a){return e.renderPart(t,n,r,t.body.length-a-1,e.props.highlightedSnake)}))},"snake".concat(n))})),i.map((function(e,t){return Object(v.jsx)("rect",{x:Z(e.x),y:$(e.y),width:U,height:U,fill:k,fillOpacity:m,shapeRendering:"auto"},"hazard"+t)})),a.map((function(t,n){return e.props.foodImage?Object(v.jsx)("image",{x:Z(t.x),y:$(t.y),width:U,height:U,href:e.props.foodImage},"food"+n):Object(v.jsx)("circle",{className:"food",cx:Z(t.x)+10,cy:$(t.y)+10,r:K,fill:w,shapeRendering:"optimizeQuality"},"food"+n)}))]})}},{key:"render",value:function(){return this.props.snakes?this.renderGrid():void 0}}]),n}(a.a.Component),ve=100,Oe=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.showCoordinateLabels?90:ve,t=this.props.showCoordinateLabels?10:0;return Object(v.jsx)("svg",{viewBox:"0 0 ".concat(ve," ").concat(ve),children:Object(v.jsx)(je,{snakes:this.props.snakes,food:this.props.food,foodImage:this.props.foodImage,hazards:this.props.hazards,columns:this.props.columns,rows:this.props.rows,highlightedSnake:this.props.highlightedSnake,theme:this.props.theme,maxWidth:e,maxHeight:e,x:t,y:0,turn:this.props.turn,showCoordinateLabels:this.props.showCoordinateLabels})})}}]),n}(a.a.Component),xe=n(17),ye=n(2),we=n.n(ye),ke=n(7),Se=n(33),_e=n.n(Se);function Ee(e,t){var n={},r=!1;return new Promise((function(a,i){var c=new _e.a(e);c.addEventListener("message",(function(e){var i=JSON.parse(e.data),s=i.Data;n[s.Turn]||(n[s.Turn]=!0,(r=t(i))&&(c.close(),a()))})),c.addEventListener("onerror",(function(e){i(e)})),c.addEventListener("onclose",(function(e){r||(r=!0,a())}))}))}var Ce={},Te={};function Le(e){return Promise.all(e.map(Ne))}function Fe(e){return Ce[e]}function Ne(e){return e in Ce?Promise.resolve(Ce[e]):function(e){return Ae.apply(this,arguments)}(e)}function Ae(){return(Ae=Object(ke.a)(we.a.mark((function e(t){var n,r,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.text();case 5:return r=e.sent,a=Re(r),Ce[t]=a,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}function He(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(ke.a)(we.a.mark((function e(t){var n,r,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in Ce)){e.next=2;break}return e.abrupt("return",!0);case 2:if(!(t in Te)){e.next=4;break}return e.abrupt("return",!1);case 4:return e.prev=4,e.next=7,fetch(t);case 7:return n=e.sent,e.next=10,n.text();case 10:return r=e.sent,(a=r.startsWith("<svg"))||(Te[t]=!0),e.abrupt("return",a);case 16:return e.prev=16,e.t0=e.catch(4),console.warn(e.t0,t,"Fallback to default"),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,null,[[4,16]])})))).apply(this,arguments)}var Me="default",ze="default";function Ie(){return(Ie=Object(ke.a)(we.a.mark((function e(t,n){var r;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t+l(n));case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.abrupt("return",Promise.resolve(r.json()));case 7:return e.abrupt("return",Promise.resolve(r.json()).then((function(e){return console.error(e.error),Promise.reject(e.error)})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e){return new Promise((function(t){return setTimeout(t,e)}))}function We(e){switch(e.cause){case"snake-collision":return"Ran into ".concat(e.eliminatedBy,"'s body");case"snake-self-collision":return"Collided with itself";case"out-of-health":return"Out of health";case"hazard":return"Eliminated by hazard";case"head-collision":return"Lost head-to-head with ".concat(e.eliminatedBy);case"wall-collision":return"Moved out of bounds";case"squad-eliminated":return"Squad was eliminated";default:return e.cause}}function Be(e){var t=e.reduce((function(e,t){return e.concat([t.HeadType,t.TailType])}),[]),n=new Set(t);return Array.from(n)}function De(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(ke.a)(we.a.mark((function e(t){var n,r,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(xe.a)(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=19;break}return(a=r.value).HeadType||(a.HeadType=Me),a.TailType||(a.TailType=ze),a.HeadType=qe(a.HeadType),a.TailType=Qe(a.TailType),e.next=11,He(a.HeadType);case 11:if(e.sent){e.next=13;break}a.HeadType=qe(Me);case 13:return e.next=15,He(a.TailType);case 15:if(e.sent){e.next=17;break}a.TailType=Qe(ze);case 17:e.next=3;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),n.e(e.t0);case 24:return e.prev=24,n.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[1,21,24,27]])})))).apply(this,arguments)}function Ye(e){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(ke.a)(we.a.mark((function e(t){var n,r,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De(t);case 2:return e.next=4,Le(Be(t));case 4:n=Object(xe.a)(t);try{for(n.s();!(r=n.n()).done;)(a=r.value).HeadSvg=Fe(a.HeadType),a.TailSvg=Fe(a.TailType)}catch(i){n.e(i)}finally{n.f()}case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e){return e.indexOf("/")>=0||e.indexOf(".")>=0}function Ke(e,t){return h("https://media.battlesnake.com",e,t)+".svg?board_version=1.2.1"}function qe(e){return Ke("/snakes/heads",Ue(e)?Me:e)}function Qe(e){return Ke("/snakes/tails",Ue(e)?ze:e)}function Je(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(ke.a)(we.a.mark((function e(t){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye(t.Snakes);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(e,t){return function(e,t){return Ie.apply(this,arguments)}(h(e,"games/".concat(t)))}function et(e,t,n){return tt.apply(this,arguments)}function tt(){return(tt=Object(ke.a)(we.a.mark((function e(t,n,r){var a,i,c,s,o;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e){if(e.Type){var t=e.Data||e;c=c.then(Object(ke.a)(we.a.mark((function n(){return we.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("frame"!==e.Type){n.next=3;break}return n.next=3,Je(t);case 3:return n.abrupt("return",r(i,e.Type,t));case 4:case"end":return n.stop()}}),n)}))))}return e.Type&&"game_end"===e.Type},a=window.location.href,t=a.substr(0,a.lastIndexOf("/")+1),e.next=5,$e(t,n);case 5:return i=e.sent,c=Promise.resolve(),o=h(d(t),"games/".concat(n,"/events")),e.next=10,Ee(o,s);case 10:return e.next=12,c;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e,t){return e.filter((function(e){return e.turn===t}))[0]}var rt=n(27),at=(n(50),{color:R});var it=function(e){var t;if(""===e.error)return"";var n=e.error.toString().split(":"),r=Object(rt.a)(n,2);return r[0],t=r[1],Object(v.jsxs)("div",{className:"error-message",style:at,children:[Object(v.jsx)("span",{className:"material-icons material-icons-inline",children:"error"}),Object(v.jsx)("span",{children:t})]})},ct=(n(51),{color:R,cursor:"pointer",margin:0,padding:0});var st,ot,ut,lt,dt,ht,pt,ft,bt,mt,gt,jt,vt,Ot,xt,yt,wt=function(e){var t=e.errorMessage;if(""===t)return"";var n=t.toString().split(":");Object(rt.a)(n,1)[0];return Object(v.jsx)("div",{style:ct,children:Object(v.jsx)("span",{className:"material-icons material-icons-inline",children:"error"})})},kt=Object(j.a)("div")(st||(st=Object(g.a)(["\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n\n  opacity: ",";\n"])),(function(e){return e.isEliminated?"0.5":"1.0"})),St=Object(j.a)("span")((function(e){return{display:"block",textShadow:e.theme===G?"0 1px 2px rgba(0,0,0,0.90)":null}})),_t=Object(j.a)("span")((function(e){return{marginLeft:"auto",textShadow:e.theme===G?"0 1px 2px rgba(0,0,0,0.90)":null}})),Et=Object(j.a)("div")({fontSize:"1rem",fontWeight:"400",display:"flex",flexDirection:"row",height:"1.25rem"}),Ct=Object(j.a)("span")((function(e){return{display:"block",flexGrow:1,textShadow:e.theme===G?"0 1px 2px rgba(0,0,0,0.90)":null}})),Tt=Object(j.a)("span")((function(e){var t=e.theme,n=e.latency;return{color:"0"===n?"red":"inherit",marginLeft:"auto",textShadow:t===G?"0 1px 2px rgba(0,0,0,0.90)":null,display:""===n?"none":"block"}})),Lt=Object(j.a)("div")({marginTop:"0.2rem",width:"100%",height:"1.0rem",background:E,borderRadius:"1.5rem"}),Ft=Object(j.a)("div")((function(e){return{height:"100%",backgroundColor:e.color,borderRadius:"inherit"}})),Nt=Object(j.a)("div")((function(e){return{width:"100%",marginTop:"0.2rem",fontSize:"1rem",lineHeight:"1rem",color:e.theme===G?L:F}})),At=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).state={showError:!1},r}return Object(f.a)(n,[{key:"render",value:function(){return Object(v.jsxs)(kt,{isEliminated:!!this.props.snake.death,children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)(St,{children:this.props.snake.name}),Object(v.jsx)(_t,{children:this.props.snake.body.length})]}),Object(v.jsxs)(Et,{children:[Object(v.jsxs)(Ct,{children:["by ",this.props.snake.author]}),Object(v.jsx)(wt,{errorMessage:this.props.snake.error}),Object(v.jsxs)(Tt,{latency:this.props.snake.latency,children:[this.props.snake.latency," ms"]})]}),this.props.snake.death?Object(v.jsx)(Nt,{theme:this.props.theme,children:We(this.props.snake.death)}):Object(v.jsx)(Lt,{children:Object(v.jsx)(Ft,{color:this.props.snake.color,style:{width:"".concat(this.props.snake.health,"%")}})}),Object(v.jsx)(it,{error:this.props.highlighted?this.props.snake.error:""})]})}}]),n}(a.a.Component),Rt=function(e){var t=e.filter((function(e){return!e.isDead})).sort((function(e,t){var n=e.name.toLowerCase(),r=t.name.toLowerCase();return n<r?-1:n>r?1:0})),n=e.filter((function(e){return e.isDead})).sort((function(e,t){return e.death.turn-t.death.turn})).reverse();return t.concat(n)},Ht=Object(j.a)("div")(ot||(ot=Object(g.a)(["\n  display: none;\n  color: ",";\n  font-weight: 600;\n  font-size: 1.4rem;\n\n  @media (min-width: ",") {\n    display: ",";\n    font-size: 1.8rem;\n  }\n\n  @media (min-width: ",") {\n    font-size: 3.2rem;\n    letter-spacing: 0.1rem;\n  }\n"])),(function(e){return e.theme===G?L:F}),M,(function(e){return e.hide?"none":"block"}),I),Pt=Object(j.a)("div")(ut||(ut=Object(g.a)(["\n  padding: 0.75rem;\n  transition: background-color 0.2s, box-shadow 0.2s;\n  border: 2px solid\n    ",";\n  &:hover {\n    background-color: ",";\n    cursor: pointer;\n    border-color: ",";\n  }\n"])),(function(e){return e.highlighted?T:"transparent"}),(function(e){return e.theme===G?N:H}),(function(e){return e.highlighted?T:C})),Mt=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={highlightedSnake:null},e.toggleHighlight=function(t){var n=function(e,t){return e.highlightedSnake!==t._id?t._id:null};e.props.highlightSnake(n(e.state,t)),e.setState((function(e){return{highlightedSnake:n(e,t)}}))},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.state.highlightedSnake;return Object(v.jsx)(Ht,{theme:this.props.theme,children:this.props.snakes?Rt(this.props.snakes).map((function(n,r){return Object(v.jsx)(Pt,{onClick:function(){return e.toggleHighlight(n)},highlighted:t===n._id,theme:e.props.theme,children:Object(v.jsx)(At,{snake:n,theme:e.props.theme,highlighted:t===n._id},"avatar"+r)},"avatarwrapper"+r)})):void 0})}}]),n}(a.a.Component),zt=n(34),It=n.n(zt),Gt=Object(j.a)("div")(lt||(lt=Object(g.a)(["\n  display: ",";\n  margin-top: 1rem;\n  width: 100%;\n"])),(function(e){return e.hide?"none":"block"})),Wt=Object(j.a)("div")({position:"relative"}),Bt=Object(j.a)("div")(dt||(dt=Object(g.a)(["\n  position: absolute;\n  bottom: 2.5rem;\n  right: 2.5rem;\n  width: 20rem;\n  padding: 1rem;\n  border: solid 1px #999;\n  background: #fff;\n\n  @media (min-width: ",") {\n    left: 2.5rem;\n    right: 0;\n  }\n\n  h4 {\n    margin-top: 0;\n    margin-bottom: 1rem;\n  }\n\n  ul {\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n  }\n"])),M),Dt=Object(j.a)("div")({display:"flex",justifyContent:"center",width:"100%"}),Xt=Object(j.a)("button")(ht||(ht=Object(g.a)(["\n  display: inline-block;\n  min-width: 3rem;\n  text-align: center;\n  background: transparent;\n  color: ",";\n  font-size: 1.4rem;\n  border: none;\n  text-decoration: none;\n  cursor: pointer;\n  transition: background 250ms ease-in-out, transform 150ms ease;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  &:disabled {\n    color: #ccc;\n    cursor: not-allowed;\n  }\n\n  @media (max-width: ",") {\n    padding: 2rem 2rem;\n  }\n"])),(function(e){return e.theme===G?"#eee":"#333"}),P),Yt=Object(j.a)("input")(pt||(pt=Object(g.a)(["\n  width: 100%;\n  max-width: 60rem;\n\n  &:disabled,\n  &:disabled:hover {\n    opacity: 0.2;\n    cursor: not-allowed;\n  }\n"]))),Vt=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).state={paneHidden:!0},r.handleParentKeyboardEvent=function(e){var t=e.data.code;r.handleKeyEvent(r.keyboardCodeMap[t],e)},r.handleReload=function(){r.props.reloadGame()},r.handlePlayPause=function(){r.props.toggleGamePause()},r.handleBackward=function(){r.props.stepBackwardFrame()},r.handleForward=function(){r.props.stepForwardFrame()},r.handleScrubMouseDown=function(){r.props.pauseGame()},r.handleScrubbing=function(e){r.props.stepToTurn(parseInt(e.target.value))},r.handleSettings=function(){r.props.persistAvailable&&r.props.history.push("/settings")},r.handleShortcutPaneShowToggle=function(){r.setState({paneHidden:!r.state.paneHidden})},r.handleKeyEvent=function(e,t){switch(t.preventDefault(),e){case"r":r.handleReload();break;case"left":r.handleBackward();break;case"right":r.handleForward();break;case"space":r.handlePlayPause();break;case",":r.handleSettings()}},r.keyboardCodeMap={KeyR:"r",ArrowLeft:"left",ArrowRight:"right",Space:"space",Settings:","},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("message",this.handleParentKeyboardEvent)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleParentKeyboardEvent)}},{key:"render",value:function(){return this.renderControls()}},{key:"renderScrubbing",value:function(){var e=this.props.hasAllFrames?this.props.currentFrame.turn:0,t=this.props.hasAllFrames?this.props.maxTurn:0;return this.props.showFrameScrubber&&Object(v.jsx)(Dt,{children:Object(v.jsx)(Yt,{type:"range",min:"0",max:t,value:e,onMouseDown:this.handleScrubMouseDown,onChange:this.handleScrubbing,disabled:!this.props.hasAllFrames})})}},{key:"renderControls",value:function(){var e=this.props,t=e.currentFrame,n=e.hideControls,r=e.paused,a=e.theme,i=e.persistAvailable,c=i?"Configure playback settings":"Enable localStorage to configure playback settings";return Object(v.jsxs)(Gt,{hide:n,children:[this.renderScrubbing(),Object(v.jsxs)(Dt,{children:[Object(v.jsx)(Xt,{onClick:this.handleBackward,disabled:0===t.turn||!r,theme:a,children:Object(v.jsx)("span",{className:"material-icons icon-image-preview",children:"skip_previous"})}),Object(v.jsx)(Xt,{onClick:this.handlePlayPause,theme:a,children:Object(v.jsx)("span",{className:"material-icons icon-image-preview",children:r?"play_arrow":"pause"})}),Object(v.jsx)(Xt,{onClick:this.handleForward,disabled:!r,theme:a,children:Object(v.jsx)("span",{className:"material-icons icon-image-preview",children:"skip_next"})}),Object(v.jsx)(Xt,{onClick:this.handleReload,disabled:0===t.turn||!r,theme:a,children:Object(v.jsx)("span",{className:"material-icons icon-image-preview",children:"refresh"})}),Object(v.jsx)(Xt,{onClick:this.handleSettings,disabled:!i,theme:a,children:Object(v.jsx)("span",{className:"material-icons icon-image-preview",title:c,children:"settings"})}),Object(v.jsx)(It.a,{handleKeys:Object.values(this.keyboardCodeMap),onKeyEvent:this.handleKeyEvent}),Object(v.jsxs)(Wt,{children:[Object(v.jsx)(Xt,{onClick:this.handleShortcutPaneShowToggle,theme:a,children:Object(v.jsx)("span",{className:"material-icons icon-image-preview",children:"help"})}),!this.state.paneHidden&&Object(v.jsxs)(Bt,{children:[Object(v.jsx)("h4",{children:"Keyboard shortcuts"}),Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{children:"Reload = r"}),Object(v.jsx)("li",{children:"Play/Pause = space"}),Object(v.jsx)("li",{children:"Backward = left arrow"}),Object(v.jsx)("li",{children:"Forward = right arrow"}),Object(v.jsx)("li",{children:"Settings = comma"})]})]})]})]})]})}}]),n}(a.a.Component),Ut=Object(s.g)(Vt),Kt=Object(j.a)("div")(ft||(ft=Object(g.a)(["\n  height: 100%;\n  width: 100%;\n\n  > svg {\n    object-fit: contain;\n    width: 100%;\n    height: 100%;\n    max-width: 100%;\n    max-height: 100%;\n  }\n"]))),qt=Object(j.a)((function(e){return Object(v.jsx)(Kt,{children:Object(v.jsxs)("svg",Object(o.a)(Object(o.a)({"data-name":"Layer 1",viewBox:"0 0 360 150.82",width:"1em",height:"1em"},e),{},{children:[Object(v.jsxs)("defs",{children:[Object(v.jsxs)("linearGradient",{id:"Wordmark_svg__a",x1:118.62,y1:69.31,x2:345.43,y2:181.87,gradientTransform:"matrix(1 0 0 -1 0 150.95)",gradientUnits:"userSpaceOnUse",children:[Object(v.jsx)("stop",{offset:0,stopColor:"#3d2f90"}),Object(v.jsx)("stop",{offset:1,stopColor:"#ea0578"})]}),Object(v.jsx)("linearGradient",{id:"Wordmark_svg__b",x1:153.2,y1:-.36,x2:380.02,y2:112.21,xlinkHref:"#Wordmark_svg__a"}),Object(v.jsx)("linearGradient",{id:"Wordmark_svg__c",x1:110.47,y1:85.74,x2:337.28,y2:198.31,xlinkHref:"#Wordmark_svg__a"}),Object(v.jsx)("linearGradient",{id:"Wordmark_svg__d",x1:132.19,y1:41.99,x2:359,y2:154.56,xlinkHref:"#Wordmark_svg__a"}),Object(v.jsx)("linearGradient",{id:"Wordmark_svg__e",x1:98.64,y1:109.56,x2:325.45,y2:222.13,xlinkHref:"#Wordmark_svg__a"}),Object(v.jsx)("linearGradient",{id:"Wordmark_svg__f",x1:130.52,y1:47.49,x2:364.27,y2:163.5,xlinkHref:"#Wordmark_svg__a"}),Object(v.jsx)("linearGradient",{id:"Wordmark_svg__g",x1:13.42,y1:72.58,x2:346.58,y2:72.58,xlinkHref:"#Wordmark_svg__a"}),Object(v.jsxs)("linearGradient",{id:"Wordmark_svg__h",x1:86.06,y1:89.18,x2:274.73,y2:89.18,gradientUnits:"userSpaceOnUse",children:[Object(v.jsx)("stop",{offset:.23,stopColor:"#3d2f90"}),Object(v.jsx)("stop",{offset:1,stopColor:"#9f1782"})]})]}),Object(v.jsxs)("g",{opacity:.15,children:[Object(v.jsx)("path",{d:"M215.54 86.65h-23.25V41h-10.54v45.65H158.5V41H142l-8.33-20h94.25l-.45 20h-12z",fill:"url(#Wordmark_svg__a)"}),Object(v.jsx)("path",{d:"M339.67 139L254 92.43l22-22.36-21.6-49.25h86.18v8.25L326.36 39l15.87 13.86h-39.14l11.13 24-12.44 12.6z",fill:"url(#Wordmark_svg__b)"}),Object(v.jsx)("path",{d:"M105.76 87.44L88.25 69.73l20.55-49.12h22.4l27.62 66H133.6l-3.38-8.53h-20.79z",fill:"url(#Wordmark_svg__c)"}),Object(v.jsx)("path",{d:"M256.83 86.65h-27.21V21.06h23.24V63h18l3 6.8z",fill:"url(#Wordmark_svg__d)"}),Object(v.jsx)("path",{d:"M21.56 139l38-49.57-12.47-12.67 11.14-24H19l15.87-13.83L20.63 29v-8.28h86.17L85.28 70.13l22 22.3z",fill:"url(#Wordmark_svg__e)"})]}),Object(v.jsx)("path",{d:"M87.27 125.08a3.06 3.06 0 00.84-.72l-1.65 1.11z",fill:"url(#Wordmark_svg__f)"}),Object(v.jsx)("path",{d:"M343.93 133.36l-88.33-48 22.65-23.05-22.17-50.51h88.81V20l-14.66 10.19 16.35 14.28h-40.34l11.48 24.69-12.82 13.1zM259 84.84L336.51 127l-34.3-44.92 13.07-13.35L303 42.4h38.11L326.92 30l15.93-11.13v-5.39h-83.66l21.48 49.26zm57.7-57.75a4.75 4.75 0 114.74-4.75 4.66 4.66 0 01-4.79 4.75zm0-7.49a2.74 2.74 0 102.74 2.74 2.7 2.7 0 00-2.79-2.74zm-185-7.81l8.3 20.58h17.31v46.21L129.1 11.81H106C99 28.68 91.89 45.08 84.83 62l18 18.25 3.68-9.63h21.59q1.72 4.41 3.47 8.8h49.62v-47h10.88v47H216v-47h12.28V11.8zm1.3 65.55l-3.47-8.8h-24.38l-3.05 8-14.86-15c6.71-16.05 13.42-31.6 20.13-47.64h20.37c8.93 21.32 17.85 42.16 26.77 63.49zm93.34-47H214v47h-19.9v-47h-14.95v47h-19.87v-47h-17.94l-6.77-16.5h91.73zM109.91 55h14.93l-7.47-19.8q-3.73 9.92-7.46 19.8zm2.94-2l4.52-12 4.52 12zm160 2h-18.54V11.8h-23.52l-.43 67.39 28.09.19 17.46-17.29zm-15.24 22.34l-25.21-.18V13.47h19.85V57h19.21l2 4.59zm-155.18 9.09zm0 0zm0 0zM43.4 17.6a4.75 4.75 0 104.75 4.74 4.65 4.65 0 00-4.75-4.74zm0 7.48a2.74 2.74 0 112.74-2.74 2.69 2.69 0 01-2.74 2.74zm38.33 37.55l22.12-50.8H15.12V20l14.65 10.22-16.35 14.27h40.34l-11.48 24.7 12.8 13.11L16.81 133l82.84-45.06 4.68-2.54zm19.37 22.2L23.53 127l34.31-44.91-13.07-13.35L57 42.4H18.89L33.12 30 17.2 18.89v-5h83.62c-5 11.68-21.57 49.2-21.57 49.2z",fill:"url(#Wordmark_svg__g)"}),Object(v.jsx)("path",{d:"M271.62 55.66c-.23-.26-.17-.48-.69-.44a.74.74 0 00-.43 1.21c.08.09-.2.2-.24.18a3.85 3.85 0 00-.44-.19c-.08 0-.13.11-.17-.05s-.34-.41-.52-.35-.05.08-.15 0-.2-.21-.36-.18a26.54 26.54 0 00-6.15 2.16 4.38 4.38 0 01-1.27.5c-.2 0-.37-.38-.65-.23a5.68 5.68 0 01-.77.42c-.19 0-.24-.09-.39 0-3.16 1.26-6.21 2.65-9.28 4.07a6.76 6.76 0 01-1 .32c-1.08.36-2.12.67-3.22 1a15.64 15.64 0 00-3.32 1.12.55.55 0 00.06 1c-2.37 1-4.82 1.88-7.25 2.74-.78.27-.46 1.19.29 1.19-.21.23-.16.1-.43.41a4.37 4.37 0 00-.93 1.57c0 .18.25.49.25.62a1.69 1.69 0 010 .21c-.12 5.6.05 11.16.23 16.75l-.54.15a40.47 40.47 0 01-6 1 21.23 21.23 0 01-3.56.12c-.18 0-.3-.36-.48-.39a.63.63 0 01-.39-.13c-.83-.65-1.57-1-2.38-1.81a18.7 18.7 0 01-2.26-3l.06-.12a7 7 0 01.54-.76c.17-.21.38-.52.58-.75a6.21 6.21 0 00.42-.81 15.73 15.73 0 011.7-2.19c.68-.77.86-.9 1.78-2s3.47-4 4.35-5.13a11.59 11.59 0 001.53-2.28c.22-.44 0-.76.14-1.14a2.57 2.57 0 00.16-.93 2.13 2.13 0 00-.63-1.13 2.94 2.94 0 00-.81-.56c-.31-.15-.52-.31-.86-.44s-.52-.63-.87-.76a4.06 4.06 0 01-1.23-.45c-.34-.26-.76-.78-1.12-.8s-.71.54-1 .76-.81.56-1.09.77.12.4.21.41.34.26.26.33-.31-.13-.51-.07-.34-.14-.62.2c-1.47 1.75-3.95 4.69-5.31 6.22a20.74 20.74 0 00-2.45 3.44c-.32.49-.62.91-1 1.36l-1.12 1.43c-.29.39-.36.47-.61.83v-1.84c0-.84 0-2.07.05-3 0-1.52-.09-3.48-.09-4.9a11.51 11.51 0 00-.72-3.5c-.23-.83.2-1.82.12-2.56s-.46-.72-1-.67a.73.73 0 00-1.24-.76c-.55.61-.73 1.28-1.28 1.77-.88.77-1.84 1.33-2.69 2.12-2.23 0-2.4 1.66-2.55 3.52a1.51 1.51 0 000 .7 4.64 4.64 0 01.05 1c.06.82 0 2 .07 2.68s-.38 1.06-.38 1.55c0 1.71.19 3.36.08 5-.08 1.09-.11 2-.19 3.11-.43-.5-.85-1-1.26-1.51-2.74 1.08-5.55 2.22-8.29 3.15a3.45 3.45 0 01-.66.19c-.23 0-.36.25-.54.21s-.38.18-.54 0a12 12 0 01-1.2-2.32c-.36-.76-.8-1.81-1.1-2.54l-.78-1.88c-.27-.66-.6-1.2-.86-1.86s-.39-1.44-.67-2.11a2.09 2.09 0 01-.08-.23 18 18 0 00-2.83-6.09c-.14-.23-.26-.71-.38-.67a2.44 2.44 0 00-.79 1c-.06.28.64.89.62 1.12s-.58 0-.64-.09 0-.05 0-.15a.66.66 0 00-.25-.37c-.08 0 0-.15 0-.11a12.69 12.69 0 00-.75 1.09 1.39 1.39 0 01-1.69.42c-1.19-.55-2.33-1.15-3.51-1.71a5.54 5.54 0 00-.57-.21c-1.07 2.51-1.71 5.11-3.37 7.32 0 .07-.19.11-.24.16a4.61 4.61 0 00-.76 2 1.91 1.91 0 01-.07.3c-.27.59-.64 1.51-.87 2s.06.6.12.9 0 .07-.09.46a18.56 18.56 0 01-.56 1.78 2.17 2.17 0 000 .51c0 .14.15.28.13.39-.1.61-.3 1.32-.42 1.89s-.32 1.42-.42 1.87-.18.79-.24 1 0 0-.05.09 0 0 0 .06a.1.1 0 010 .09v.07a1 1 0 000 .12v.13a1.27 1.27 0 01-.06.18V92c0 .07 0 0 0 0v.07a.13.13 0 000 .08v.07c0 .07 0-.1 0 0a3.48 3.48 0 01-.1.41v.2c0 .02 0 0 0 0v-.07c0 .01 0 0 0 0v.15c0 .02 0 0 0 0v.25c0 .05 0 0 0 0v.19a.58.58 0 000 .18v.06a.51.51 0 010 .13v.06a.45.45 0 000 .11v.19c0 .04 0 0 0 0a.54.54 0 010 .15s0 .22-.08.31 0-.07 0 0v.11c0 .19-.15.65-.23 1a28.7 28.7 0 00-1.06 5.79 5.35 5.35 0 00.15 1c-.16.21-.32.38-.48.58a2 2 0 01.63.44c.08.12 0 .1 0 .15s-.05 0-.05.06v.08a.33.33 0 010 .14v.14a.26.26 0 000 .15V104.62c0 .07 0-.06 0 0v.35c0 .05.05 0 0 0s0 0 0 .06v1.04c0 .03 0 .06 0 0v.1c0 .03 0 0 0 0v.06c0 .06 0 0 0 0a.31.31 0 010 .1v.09a1.94 1.94 0 010 .24s0-.06 0 0a1.29 1.29 0 010 .19s.06 0 0 .07a.19.19 0 00-.05.11v1.83c0 .21-.06 0 0 0s0 .06 0 .1 0-.06 0 0v.5c0 .02 0 .1 0 0s-.05-.37-.06-.46a1.15 1.15 0 010-.21v-.07-.52-.39a.72.72 0 010-.23v-.05a.16.16 0 000-.09v-.05c0-.05.06 0 0-.07a1.77 1.77 0 01-.05-.32c0-.06.05 0 .06 0a2.36 2.36 0 010-.37v-.07-.05a1.89 1.89 0 00-.06.18v.09a.55.55 0 000 .18v.06c0 .06 0 0 0 0v-.06c0 .01-.06 0-.07 0s0 .14 0 .22V107.65c0 .01 0 0 0 0a.53.53 0 010 .13V108.93a1.07 1.07 0 000 .25v.07a.29.29 0 010 .09V109.83a2.18 2.18 0 000 .25 1.62 1.62 0 000-.22.31.31 0 000-.1v-.06a1.82 1.82 0 010-.33v-.18a.74.74 0 000-.15s0-.06 0 0a1.19 1.19 0 01.05.22v.11a.13.13 0 010 .09v.1s0-.07 0 0a.65.65 0 010 .2v.25a1.48 1.48 0 010 .22.12.12 0 000 .09v-.1c0-.01 0 0 0 0s0-.06 0 0v.12a.46.46 0 010 .14c0 .09.06.4.08.49s0 0 0 .1v.21h.07v-.08-.06s0-.12.05-.11 0 .06.05.08a.15.15 0 010 .07v-.07c0-.03 0 0 0 0a2.64 2.64 0 010-.29c0-.05.05 0 0-.05s0 0 0-.06v-.06-.12a3.23 3.23 0 00.58 1.24 2 2 0 002 .71 34.67 34.67 0 003.8 3.47c.45.33 1.3.2 1.24-.52a42.61 42.61 0 011-11 37.32 37.32 0 00.6-5c0-.45.08-1.23.07-1.71a17.14 17.14 0 001.53 2.92c.6.72 1.28.24 1.25-.47 0 0-.06-.08 0-.1a60.1 60.1 0 015.64-2.31c.5-.17 1-.34 1.54-.48.16.52.51 1.57.66 1.94s0 0 0 .06 0 .2.17.21a1.78 1.78 0 01.88.33c.1.14.1.08.11.12.88 3.28 1.53 6.54 2.08 9.87a.32.32 0 00.54.13c.88-1 1.12-2.38 1.57-3.53s1-2 1.42-3.13c.09-.2.3-.31.43-.5a9.13 9.13 0 001.06-1.91c.06-.15.09-.3.16-.44a3.21 3.21 0 01.24-.36c.1-.15 0-.21 0-.39a6.1 6.1 0 01.13-.84c0-.18 0-.11.06-.27s-.07 0 0-.28a13.8 13.8 0 00.35-1.41.74.74 0 00-.94-.8c-.12-.43-.44-1.16-.54-1.5s-.31-.42-.27-.67-.48-.45-.17-.63c1.12-.7 2.3 0 3.77-1.15A32.81 32.81 0 01202 90.6c.18 1.94.11 4.31.27 6.18 0 .4-.23.13-.32.32a.39.39 0 000 .44c.09.13.18.1.2.24s.28.3.32.39.05 0 0 .13-.36.07-.45.21a.87.87 0 00.06.66c.09.18.25.42.34.56a1.28 1.28 0 01.19.34c0 .16.05.56.07.68s-.06.12-.06.18.08 0 .08 0c.19 1.64.42 3.29.5 4.94a2.84 2.84 0 01-.1.65c0 .21.11.38.12.56a10.85 10.85 0 01-.16 2.28c-.05.27-.32.45-.4.71-.26.8.47 1.49 1.21.92 0 0-.06 0 0-.05a.86.86 0 00.47-.37c.13-.25.62-1 .74-1.24-.13.32-.36.7-.49 1.05-.3.87.78 1.61 1.28.76.92-1.54 1.55-3.23 2.43-4.76.06-.1.25 0 .35-.06a6.31 6.31 0 001.88-2.61 34.47 34.47 0 001-3.31 8.37 8.37 0 01.37-1.35c.51-1.24 1.26-2.64 1.92-3.87a7 7 0 001.44 1 37.56 37.56 0 006.37 1.92c.34.09.52.23.78.29s.19 0 .47 0 1.18.28 1.39.34.14.1.19.11a15.09 15.09 0 002.6.38 16.39 16.39 0 003 0c.37 0 .78-.15 1.14-.18 1.2-.12 2.37-.19 3.55-.4 0 .65.12 1.31.12 1.95 0 .12-.15.19-.18.32a3.18 3.18 0 00.54 2.85v1c0 1.14-.17 2.53.6 3.52 0 0 .12.07.13.12.13.8.33 1.8 1.26 1.86a7.35 7.35 0 002.34-.51c1-.21 1.82-.49 3-.75s2.4-.69 3.77-.94 3.3-.54 4.71-.93 2.45-.83 3.88-1.29 3.22-.75 4.7-1.24a.74.74 0 00-.21-1.46 14.51 14.51 0 00-2.94.61 13 13 0 002.63-1.16c.33-.21.9-.4.95-.72.19-1.07.35-2.65.61-3.58s.42-1.3.6-2.06c.05-.19-.18-.39-.36-.45s-.58 0-.82-.17-.51-.4-.74-.62-.53-.57-.77-.76-.55-.6-.86-.51a20 20 0 01-2.52.94 12.39 12.39 0 00-2.31 1.1c-.93.33-1.95.21-2.76.47s-1.4.36-2.12.57a18.91 18.91 0 01-2.18.46 4.08 4.08 0 01-1.64-.23v-2.94c0-1.04 0-2.21-.05-3.27a3.52 3.52 0 001.21 0c.43-.12 1 .12 1.42.07s.78-.35 1.15-.27a1.9 1.9 0 00.94-.15 1.42 1.42 0 01.4-.06h.61a7.28 7.28 0 002.23-.54.85.85 0 01.19-.09c.14 0 .74-.26.86-.28s.13-.13.15-.08c.32.61.9.44 1.31.2s.57-.36.59-.75-.05-1 0-1.26.16-.18.21-.26c.34-.52 1.11-1.1 1.35-1.54a1.51 1.51 0 00-.06-1.19 1.94 1.94 0 00-.5-1c-.21-.11-.79 0-.91-.12 0-.77.06-1.52.12-2.28 0-.23-.1-.35-.16-.53a.79.79 0 00-1.52-.09c0 .07 0 .21-.06.21s0 0-.19-.06-.33-.36-.8-.23-1.08.32-1.78.45-1.89.45-2.69.54c-1.28.14-2.79.89-4 .32-.27-.12.69-3.9.7-4.3s-.07-.26 0-.28c2.09-1 4.15-2.11 6.25-3.08 2.62-1.21 5.27-2.3 7.95-3.35 2-.79 4.08-1.48 6.13-2.18-.12-.31-.1-.59.26-.75 1.25-.57 2.59-1 3.9-1.43a6.92 6.92 0 001.3-.5 1.15 1.15 0 00.29-.84c0-.09-.5.11-.76.09a4.71 4.71 0 01-1 0c-.43-.07-.93-.73-.46-1.17.08-.07.12.2.21.19s.14.08.22.08h.13c-.07 0-.1 0 0 0a.69.69 0 00.32 0h.07c.07 0 .06 0 .22-.11a1 1 0 00.39-.77.66.66 0 00-.48-.61c-.31-.11-.52.15-.7.31a2.08 2.08 0 00-.37.35c-.13.16.14.28-.08.39a2.21 2.21 0 01-1 .15c-.52 0-.78-.88-.32-1.26s1.09-.47 1.31-.74 0-.74 0-.81a4.37 4.37 0 00-.94.13c-.22 0-.81-.27-.83-.41s-.09 0 .08 0 .59 0 .94.09a1.1 1.1 0 001.27-1.19c-.06-.64-.78-.76-1-.87s-.39 0-.31-.06a22.56 22.56 0 012.11-1.2 2.39 2.39 0 00.34-.18c.23-.14.78-.39 1.14-.58.75-.4 1.63-.8 2.4-1.23.16-.08.33-.09.48-.27s.26-.71.41-1c-1.07.44-2.12.85-3.15 1.22zm-90.93 35.1c-1 .21-1.92.39-2.88.57a1.85 1.85 0 01-.54.11c-.15 0-.56.22-.57.09a4 4 0 01.33-1c.1-.34.29-.69.42-1.09a29.15 29.15 0 011.09-2.94c.42-1 1-1.91 1.48-2.89.07-.15.14-.42.2-.59.58 1.16 1.16 2.37 1.71 3.54s1 2.29 1.58 3.46c-.93.25-1.87.53-2.82.74zm-19.42-16.94a.61.61 0 00-.77-.21l-.36-.33c-1.9-2.24-3.76-4.49-5.8-6.51a.62.62 0 00-.32.47l-.31 2v.23c-.38 2.38-.74 4.73-1.1 7.09a.75.75 0 00.38.8 3.19 3.19 0 01-.45 1.19c0 1.1.16 2.24.22 3.21v2.71a1.22 1.22 0 000 .27 1.09 1.09 0 010 .36 1 1 0 010 .34v1.28a.54.54 0 000 .18v1.54a.17.17 0 010 .14 3.53 3.53 0 010 .65 20.08 20.08 0 01-1 4.78 6.22 6.22 0 01-.29.71 101.58 101.58 0 00-4.11-11.21 7.49 7.49 0 00-.24-1.39.2.2 0 01.29 0l-.09.11a1.93 1.93 0 010-.34.49.49 0 000-.24 1.81 1.81 0 00-.22-.32v-.2h.15c.16 0 .18 0 .2-.31a10.6 10.6 0 00-.6-1.33c-.45-3-.79-5.92-1-9a.73.73 0 00-.76-.68 4 4 0 01-.16-.45 1 1 0 00-.22-.34l-.36.3a66.17 66.17 0 01-7.72 8.25c-.49.74-1 1.48-1.43 2.24V80a1.27 1.27 0 01.9.87.77.77 0 00.4-.29l.36-.52c-.5 2.61-1 5.21-1.55 7.79L134 93.71a28.65 28.65 0 00-1 5.74.25.25 0 00.25.25c-.2 1-.43 2.11-.63 3.12a.58.58 0 00-.31.63 7.39 7.39 0 001.25 2.49c.29.47.63 1 1 1.61s.89 1.48 1.39 2.24a13.37 13.37 0 001.59 1.93 4.63 4.63 0 00.65.52 43.92 43.92 0 012.09 4 .72.72 0 001.32-.17l2.76-15.3.2.36c.16-.41 2.09-1.77 2.09-1.06v.45a.46.46 0 01.42.27c.59 1.26 4 8 4.49 9a37.3 37.3 0 003 4.8 18.27 18.27 0 012.51 2.69.72.72 0 001 .23.73.73 0 00.33-.58c.52-4.06 1.95-11.65 2.09-15.71a4.18 4.18 0 01.51-.8c.05-1 .15-2 .3-3 0-1.06.18-2 .26-2.94.39-2.92.74-5.83 1.13-8.73.29-2.24.62-4.48.83-6.72a7.27 7.27 0 00-2.25-5.21zm-25.46-11.64l-.63.92a.67.67 0 00-.88-.37l-.27.13a.75.75 0 00-.31-.6.53.53 0 000-.74.53.53 0 00-.25-.63 1.19 1.19 0 00-.6-.2.51.51 0 00-.25-.59 12.81 12.81 0 001.3-.74.61.61 0 010-.27 2.18 2.18 0 01.61-.6l-2.25 1.59a1.09 1.09 0 00-.67 0 .72.72 0 00-.54 0 .68.68 0 00-.49.63c-1.12.65-2.24 1.34-3.3 2H127a1.36 1.36 0 00-.81.62l-2.24 1.4a16.6 16.6 0 00-2.87 1.9l-.94.49q.33-.27.69-.51c2.25-1.66 4.65-3.21 6.73-5.07.43-.36 0-1-.58-.74a59.61 59.61 0 00-7.25 4.87c-2.24 1.7-4.68 3.43-7 5.2-4.49 3.45-9.13 6.95-13.46 10.77a.62.62 0 00-.25.47 12 12 0 00-2.78 2.35c.49 3.12 2.74 5.5 4.22 8.28a71.94 71.94 0 019.4 2c1 .29 2 .61 2.91.94a8 8 0 012.8 1.28 4.35 4.35 0 01.66 4.73 30.7 30.7 0 01-3.95 3.7c-1.64.81-3.28 1.6-4.89 2.43s-2.83 1.48-4.22 2.24a1 1 0 010 .25c-.85.27-1.68.67-2.35.89a45 45 0 00-5 2 .56.56 0 00-.19.77.53.53 0 00.37.26.5.5 0 00.11.69.5.5 0 00.43.08 23.27 23.27 0 004.24-1.8l.29-.13a89 89 0 01-10.45 7.42c-1.51 1-3 2-4.49 3a.69.69 0 01.16.18 47.72 47.72 0 017.49-4.26c.54-.25 1.14.42.65.87a52.65 52.65 0 00-4.17 3.57l.45-.16H91a24.48 24.48 0 013.22-1.86.83.83 0 011.08.47l.16-.13h.13l1-.41-1.26.7a.51.51 0 01-.22.54l-.18.13a7.83 7.83 0 00.92-.45l.38-.24c.56-.36 1 .38.67.83 1.8-1 3.59-1.91 5.41-2.79a.73.73 0 000 .36l-.36.23a.33.33 0 00.25.6 36.92 36.92 0 004.1-1.32l2.92-1.68.38-.2a5.38 5.38 0 011.5 0 .36.36 0 00.42-.29 1.14 1.14 0 010-.45.34.34 0 00.54.36 4.73 4.73 0 01.83-.78 23.8 23.8 0 004.19-2.25 11.66 11.66 0 002.13-1.25l1.21-.94c.65-.43 1.28-.86 1.89-1.33l.53-.45a8.8 8.8 0 001.44-1.14 11.53 11.53 0 011.39-.92.29.29 0 00.13-.39l.59-.89a18.3 18.3 0 001.84-4.49 14.38 14.38 0 00.33-5 7.1 7.1 0 00-.74-2.67l-.69-1.37c-.39-.77-.82-1.52-1.28-2.24a16.27 16.27 0 00-3.52-3.26 23.53 23.53 0 00-4.49-2.24 18.39 18.39 0 01-4.73-1.68.6.6 0 01-.2-.27c3-1.91 6-3.9 9-5.85 3.72-2.45 7.58-4.8 11.21-7.5l2.47-1.25v-.18a1.23 1.23 0 01-.81-1 1.3 1.3 0 01-.47-.85.48.48 0 00.16-.12 4.48 4.48 0 00.94-2.24.57.57 0 00.82 0 .53.53 0 00.17-.25 4.17 4.17 0 000-.5.7.7 0 00-.65-.63c.24-.42.47-.87.71-1.27a.58.58 0 00-.51-.65z",fill:"url(#Wordmark_svg__h)"})]}))})}))(bt||(bt=Object(g.a)(["\n  > path {\n    fill: ",";\n  }\n"])),(function(e){var t=e.color,n=e.theme;return t||(n===G?A:N)})),Qt=n(36),Jt=n.n(Qt),Zt=Object(j.a)("div")((function(e){return{fontSize:"2rem",fontWeight:"600",textAlign:"center",textTransform:"uppercase",color:e.theme===G?L:F}})),$t=Object(j.a)("div")(mt||(mt=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin: 0.5rem 0;\n  text-align: center;\n\n  @media (min-width: ",") {\n    padding-top: 1rem;\n    padding-bottom: 2rem;\n  }\n"])),I),en=Object(j.a)("div")(gt||(gt=Object(g.a)(["\n  width: 100%;\n  height: 5rem;\n\n  @media (min-width: ",") {\n    height: 8rem;\n  }\n\n  @media (min-width: ",") {\n    height: 16rem;\n  }\n"])),z,I),tn=Object(j.a)("div")(jt||(jt=Object(g.a)(["\n  font-size: 2rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  color: ",";\n\n  @media (min-width: ",") {\n    font-size: 3rem;\n  }\n"])),(function(e){return e.theme===G?L:F}),I),nn=Object(j.a)("span")(vt||(vt=Object(g.a)(["\n  display: inline-block;\n  width: 6rem;\n"]))),rn=Object(j.a)("div")(Ot||(Ot=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n\n  @media (min-width: ",") {\n    width: ",";\n  }\n"])),M,(function(e){return e.hideScoreboard?"100%":"60vw"})),an=Object(j.a)("div")(xt||(xt=Object(g.a)(["\n  display: none;\n  width: 40vw;\n  padding: 0 2rem;\n\n  @media (min-width: ",") {\n    display: ",";\n  }\n"])),M,(function(e){return e.hide?"none":"block"})),cn=Object(j.a)("p")(yt||(yt=Object(g.a)(["\n  margin: 0.25rem;\n  width: 100%;\n  font-size: 1.2rem;\n  text-align: center;\n  color: #aaa;\n  text-transform: capitalize;\n"]))),sn=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.options;this.props.togglePlayButtons("show"),e.theme&&this.props.toggleTheme(e.theme),e.game||(this.invalidArgs=!0),this.hideLogo="true"===e.hideLogo,this.hideScoreboard="true"===e.hideScoreboard,this.showFrameScrubber=e.showFrameScrubber,this.title=e.title&&decodeURIComponent(e.title),this.props.setGameOptions(e),0===this.props.frames.length&&this.props.fetchFrames()}},{key:"render",value:function(){return this.invalidArgs?Object(v.jsx)(O,{}):this.props.gameNotFound?Object(v.jsx)(Y,{}):this.props.currentFrame?this.renderGame():Object(v.jsx)(D,{})}},{key:"renderGame",value:function(){var e=this.props,t=e.currentFrame,n=e.options;return Object(v.jsx)("main",{className:n.theme,children:Object(v.jsxs)("section",{className:Jt.a.game,children:[Object(v.jsxs)(rn,{hideScoreboard:this.hideScoreboard,children:[Object(v.jsx)(Zt,{theme:n.theme,children:this.title}),Object(v.jsx)(Oe,{snakes:t.snakes,food:t.food,foodImage:n.foodImage,hazards:t.hazards,columns:this.props.grid.width,rows:this.props.grid.height,highlightedSnake:this.props.highlightedSnake,theme:n.theme,turn:t.turn,showCoordinateLabels:n.showCoordinateLabels}),Object(v.jsx)(Ut,{currentFrame:t,hideControls:"true"===n.hideMediaControls,reloadGame:this.props.reloadGame,toggleGamePause:this.props.toggleGamePause,stepBackwardFrame:this.props.stepBackwardFrame,stepForwardFrame:this.props.stepForwardFrame,stepToTurn:this.props.stepToTurn,pauseGame:this.props.pauseGame,paused:this.props.paused,theme:n.theme,persistAvailable:n.persistAvailable,maxTurn:this.props.frames[this.props.frames.length-1].turn,showFrameScrubber:this.showFrameScrubber,hasAllFrames:this.props.hasAllFrames})]}),!this.hideScoreboard&&Object(v.jsxs)(an,{children:[Object(v.jsxs)($t,{children:[!this.hideLogo&&Object(v.jsx)(en,{children:Object(v.jsx)(qt,{theme:n.theme})}),Object(v.jsxs)(tn,{theme:n.theme,children:["Turn ",Object(v.jsx)(nn,{children:t.turn})]})]}),Object(v.jsx)(Mt,{turn:t.turn,snakes:t.snakes,food:t.food,highlightSnake:this.props.highlightSnake,theme:n.theme}),Object(v.jsxs)(cn,{children:["Rules: ",this.props.ruleset.name]})]})]})})}}]),n}(a.a.Component),on="SET_GAME_OPTIONS",un="SET_THEME",ln="GAME_OVER",dn="GAME_NOT_FOUND",hn="FETCH_FRAMES",pn="REQUEST_FRAMES",fn="RECEIVE_FRAME",bn="SET_CURRENT_FRAME",mn="PAUSE_GAME",gn="RESUME_GAME",jn="HIGHLIGHT_SNAKE",vn="RECEIVE_EVENT_END",On="TOGGLE_SETTINGS_VIEW",xn="THEME_CHANGED",yn={frameRate:6,theme:W,autoplay:!1,showFrameScrubber:!1,persistAvailable:!1,showCoordinateLabels:!1},wn=function(e,t){return{type:fn,game:e,frame:t}},kn=function(e,t,n){return{type:vn,game:e,endEvent:t,frame:n}},Sn=function(e){return{type:bn,frame:e}},_n=function(){return{type:mn}},En=function(){return{type:gn}},Cn=function e(t){return function(){var n=Object(ke.a)(we.a.mark((function n(r,a){var i,c,s,o,u,l,d,h,p,f,b;return we.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=a().game.gameOptions.frameRate,c=a().game.frames.slice(),s=c.indexOf(t),o=c.slice(s),u=Math.ceil(i||6),l=1e3/u,d=Object(xe.a)(o),n.prev=7,d.s();case 9:if((h=d.n()).done){n.next=18;break}if(p=h.value,!a().game.paused){n.next=13;break}return n.abrupt("return");case 13:return r(Sn(p)),n.next=16,Ge(l);case 16:n.next=9;break;case 18:n.next=23;break;case 20:n.prev=20,n.t0=n.catch(7),d.e(n.t0);case 23:return n.prev=23,d.f(),n.finish(23);case 26:(f=o[o.length-1]).gameOver?a().game.paused||(a().game.gameOptions.loop?(b=nt(c,0),r(e(b))):r({type:ln})):r(e(f));case 28:case"end":return n.stop()}}),n,null,[[7,20,23,26]])})));return function(e,t){return n.apply(this,arguments)}}()},Tn=function(e){return{type:On,showHide:e}},Ln=function(e){return{type:xn,theme:e}},Fn=function(e){if(!e||!e.length)return{};var t=e.substr(1).split("&").map(u),n=window.location.href;return t.engine=n.substr(0,n.lastIndexOf("/")+1),t.reduce((function(e,t){return e[t.key]=t.value,e}),{})}(window.location.search);"undefined"!==typeof Fn.autoplay&&(Fn.autoplay="true"===Fn.autoplay),"undefined"!==typeof Fn.showFrameScrubber&&(Fn.showFrameScrubber="true"===Fn.showFrameScrubber);var Nn=Object(c.b)((function(e){var t=e.game,n=e.settings;return{options:Object(o.a)(Object(o.a)({},n),Fn),ruleset:t.ruleset,grid:t.grid,gameNotFound:t.gameNotFound,paused:t.paused,currentFrame:t.currentFrame,frames:t.frames,highlightedSnake:t.highlightedSnake,theme:Fn.boardTheme||n.theme,hasAllFrames:!!t.endEvent}}),(function(e){return{setGameOptions:function(t){return e({type:on,gameOptions:t})},fetchFrames:function(){return e(function(){var e=Object(ke.a)(we.a.mark((function e(t,n){var r,a,i,c,s,o;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().game.gameOptions,a=r.autoplay,i=r.engine,c=r.game,s=r.turn,t({type:pn}),e.prev=2,e.next=5,et(i,c,(function(e,r,i){if("frame"===r){var c=i;if(c.Turn=c.Turn||0,t(wn(e,c)),0===c.Turn){var s=n().game.frames[0];t(Sn(s)),a&&(t(En()),t(Cn(s)))}}else if("game_end"===r){var o=n().game.frames.length,u=n().game.frames[o-1];u.gameOver=!0,t(kn(e,i,u))}}));case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",t({type:dn}));case 11:s&&s<=n().game.frames.length&&(o=n().game.frames[s],t(Sn(o)));case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}())},toggleTheme:function(t){return e((n=t,function(){var e=Object(ke.a)(we.a.mark((function e(t){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:un,theme:n});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var n},reloadGame:function(){return e(function(){var e=Object(ke.a)(we.a.mark((function e(t,n){var r,a,i;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n().game,a=r.frames,r.paused&&(i=nt(a,0),t(Sn(i)));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},toggleGamePause:function(t){return e(function(){var e=Object(ke.a)(we.a.mark((function e(t,n){var r,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n().game,a=r.currentFrame,r.paused?(t(En()),t(Cn(a))):t(_n());case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},pauseGame:function(){return e(function(){var e=Object(ke.a)(we.a.mark((function e(t,n){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n().game.paused||t(_n());case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},stepForwardFrame:function(){return e(function(){var e=Object(ke.a)(we.a.mark((function e(t,n){var r,a,i,c,s;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n().game,a=r.currentFrame,i=r.frames,c=a.turn+1,(s=nt(i,c))&&t(Sn(s));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},stepBackwardFrame:function(){return e(function(){var e=Object(ke.a)(we.a.mark((function e(t,n){var r,a,i,c,s;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n().game,a=r.currentFrame,i=r.frames,c=a.turn-1,(s=nt(i,c))&&t(Sn(s));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},stepToTurn:function(t){return e((n=t,function(){var e=Object(ke.a)(we.a.mark((function e(t,r){var a,i;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r().game.frames,(i=nt(a,n))&&t(Sn(i));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));var n},highlightSnake:function(t){return e(function(e){return{type:jn,snakeId:e}}(t))},togglePlayButtons:function(t){return e(Tn(t))}}}))(sn),An=n(26);function Rn(e){var t;try{t=window[e];var n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(r){return(r instanceof DOMException&&22===r.code||1014===r.code||"QuotaExceededError"===r.name||"NS_ERROR_DOM_QUOTA_REACHED"===r.name)&&t&&0!==t.length}}function Hn(e){if(Rn("localStorage"))return window.localStorage.getItem(e)}function Pn(e,t){Rn("localStorage")&&window.localStorage.setItem(e,t)}var Mn=Object(An.b)({name:"settings",initialState:yn,reducers:{frameRateUpdated:function(e,t){e.frameRate=t.payload},themeSelected:function(e,t){e.theme=t.payload},autoPlayUpdated:function(e,t){e.autoplay=t.payload},showFrameScrubberUpdated:function(e,t){e.showFrameScrubber=t.payload},showCoordinateLabelsUpdated:function(e,t){e.showCoordinateLabels=t.payload}}}),zn=Mn.actions,In=zn.frameRateUpdated,Gn=zn.themeSelected,Wn=zn.autoPlayUpdated,Bn=zn.showFrameScrubberUpdated,Dn=zn.showCoordinateLabelsUpdated,Xn=function(e){return e.settings.frameRate},Yn=function(e){return e.settings.theme},Vn=function(e){return e.settings.autoplay},Un=function(e){return e.settings.showFrameScrubber},Kn=function(e){return e.settings.showCoordinateLabels};var qn=Mn.reducer,Qn=n(37),Jn=n.n(Qn),Zn={min:1,max:5},$n={min:6,max:12};function er(e){var t=2;return e<=Zn.max?t=1:e>$n.max&&(t=3),t}var tr=function(e){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("input",{type:"range",min:1,max:3,value:er(e.default),onChange:function(t){return function(e,t){var n=20,r=e.target.valueAsNumber||e.target.value;r<=1?n=3:r<=2&&(n=6),t.call(this,n)}(t,e.onChange)}}),Object(v.jsxs)("div",{className:Jn.a.labels,children:[Object(v.jsx)("span",{children:"Slow"}),Object(v.jsx)("span",{children:"Medium"}),Object(v.jsx)("span",{children:"Fast"})]})]})},nr=n(12),rr=n.n(nr),ar=function(){var e=Object(s.f)(),t=Object(c.d)(Yn),n=Object(c.d)(Xn),a=Object(c.d)(Vn),i=Object(c.d)(Un),o=Object(c.d)(Kn),u=Object(c.c)();return Object(r.useEffect)((function(){u(Tn("hide")),u(_n())})),Object(v.jsx)("main",{children:Object(v.jsxs)("section",{children:[Object(v.jsx)("h2",{children:"Playback Settings"}),Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("legend",{children:"Playback Speed"}),Object(v.jsx)("div",{className:rr.a.info,children:"Adjust the playback speed of your games"}),Object(v.jsx)("div",{className:rr.a.inputContainer,children:Object(v.jsx)(tr,{default:n,onChange:function(e){u(In(e))}})})]}),Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("legend",{children:"Theme"}),Object(v.jsx)("div",{className:rr.a.info,children:"Change your game theme colors"}),Object(v.jsxs)("div",{className:rr.a.inputContainer&&rr.a.row,children:[Object(v.jsxs)("label",{children:[Object(v.jsx)("input",{type:"radio",value:"light",name:"theme",checked:"light"===t,onChange:function(e){return u(Gn(e.target.value))&&u(Ln(e.target.value))}}),Object(v.jsx)("span",{className:rr.a.radio}),"Light"]}),Object(v.jsxs)("label",{children:[Object(v.jsx)("input",{type:"radio",value:"dark",name:"theme",checked:"dark"===t,onChange:function(e){return u(Gn(e.target.value))&&u(Ln(e.target.value))}}),Object(v.jsx)("span",{className:rr.a.radio}),"Projector"]})]})]}),Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("legend",{children:"Autoplay"}),Object(v.jsx)("div",{className:rr.a.info,children:"All games will start playing as soon as the game loads"}),Object(v.jsx)("div",{className:rr.a.inputContainer,children:Object(v.jsxs)("label",{children:[Object(v.jsx)("input",{type:"checkbox",name:"autoplay",checked:a,onChange:function(e){return u(Wn(e.target.checked))}}),Object(v.jsx)("span",{className:rr.a.checkmark}),a?"On":"Off"]})})]}),Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("legend",{children:"Frame Scrubber [EXPERIMENTAL]"}),Object(v.jsxs)("div",{className:rr.a.info,children:["Display progress bar that shows current frame and allows quickly jumping to specific frames. \xa0",Object(v.jsx)("a",{href:"https://github.com/BattlesnakeOfficial/feedback/discussions/171",target:"_blank",rel:"noreferrer",children:"Let us know what you think!"})]}),Object(v.jsx)("div",{className:rr.a.inputContainer,children:Object(v.jsxs)("label",{children:[Object(v.jsx)("input",{type:"checkbox",name:"showFrameScrubber",checked:i,onChange:function(e){return u(Bn(e.target.checked))}}),Object(v.jsx)("span",{className:rr.a.checkmark}),i?"On":"Off"]})})]}),Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("legend",{children:"Show Coordinate Labels [EXPERIMENTAL]"}),Object(v.jsxs)("div",{className:rr.a.info,children:["Adds coordinate labels to the game board. \xa0 These go from 0 to the width/height of the board to make it easier to debug games",Object(v.jsx)("a",{href:"https://github.com/orgs/BattlesnakeOfficial/discussions/231",target:"_blank",rel:"noreferrer",children:"Let us know what you think!"})]}),Object(v.jsx)("div",{className:rr.a.inputContainer,children:Object(v.jsxs)("label",{children:[Object(v.jsx)("input",{type:"checkbox",name:"showCoordinateLabels",checked:o,onChange:function(e){return u(Dn(e.target.checked))}}),Object(v.jsx)("span",{className:rr.a.checkmark}),o?"On":"Off"]})})]}),Object(v.jsx)("fieldset",{className:rr.a.centered,children:Object(v.jsx)("button",{onClick:function(){return e.goBack()},children:"Return to Game"})})]})})},ir=(n(53),function(){return Object(v.jsxs)(s.c,{children:[Object(v.jsx)(s.a,{path:"/settings",component:ar}),Object(v.jsx)(s.a,{component:Nn})]})}),cr=n(38),sr=n.n(cr),or="head",ur="tail",lr="body";function dr(e){!function(e){e.Turn=e.Turn||0;var t,n=Object(xe.a)(e.Snakes);try{for(n.s();!(t=n.n()).done;){var r,a=t.value,i=Object(xe.a)(a.Body);try{for(i.s();!(r=i.n()).done;){var c=r.value;c.X=c.X||0,c.Y=c.Y||0}}catch(l){i.e(l)}finally{i.f()}}}catch(l){n.e(l)}finally{n.f()}var s,o=Object(xe.a)(e.Food);try{for(o.s();!(s=o.n()).done;){var u=s.value;u.X=u.X||0,u.Y=u.Y||0}}catch(l){o.e(l)}finally{o.f()}}(e);var t=function(e){if(e){var t=e.map(pr);return t.forEach((function(e,n){if(e.death&&e.death.eliminatedBy&&e.death.eliminatedBy.length>0)for(var r in t)if(t[r]._id===e.death.eliminatedBy){t[n].death.eliminatedBy=t[r].name;break}})),t}}(e.Snakes);return{turn:e.Turn,snakes:t,food:mr(e.Food),hazards:mr(e.Hazards)}}function hr(e){var t=sr()(e);for(var n in t.snakes){var r=t.snakes[n];r.id=r._id,delete r._id,delete r.headSvg,delete r.tailSvg}return t}function pr(e){var t=e.Body.filter((function(t,n){return br(e,n)}));return{body:e.Body.map((function(t,n){return function(e,t){var n=e.Body[t],r=function(e,t){if(0===t)return or;if(t===e.Body.length-1)return ur;return lr}(e,t),a=gr(n),i=a.x,c=a.y,s=function(e,t,n,r){var a;if("head"===e)a=jr(t.Body[1],t.Body[0]);else{var i;do{i=t.Body[Math.max(r-1,0)],--r}while(r>0&&i.X===n.X&&i.Y===n.Y);a=jr(n,i)}return a}(r,e,n,t),o=!br(e,t)||void 0;return{direction:s,type:r,isOverlapped:o,x:i,y:c}}(e,n)})),color:e.Color,_id:e.ID,name:e.Name,effectiveSpace:t.length,health:e.Health,latency:e.Latency,error:e.Error,timing:e.TimingMicros,isDead:!!e.Death,death:fr(e.Death),head:e.HeadType&&e.HeadType.toLowerCase(),tail:e.TailType&&e.TailType.toLowerCase(),headSvg:e.HeadSvg,tailSvg:e.TailSvg,squad:e.Squad,author:e.Author,shout:e.Shout}}function fr(e){if(e)return{cause:e.Cause,turn:e.Turn||0,eliminatedBy:e.EliminatedBy}}function br(e,t){var n=e.Body.length-1,r=e.Body[0],a=e.Body[n],i=e.Body[t];if(0===t)return!0;if(t===n)return!(r.X===i.X&&r.Y===i.Y);var c=e.Body[t-1];return!(a.X===i.X&&a.Y===i.Y)&&!(r.X===i.X&&r.Y===i.Y)&&!(c&&c.X===i.X&&c.Y===i.Y)}function mr(e){if(e)return e.map(gr)}function gr(e){return{x:e.X,y:e.Y}}function jr(e,t){if(e&&t){if(e.X+1===t.X)return"right";if(e.X-1===t.X)return"left";if(e.Y+1===t.Y)return"up";if(e.Y-1===t.Y)return"down";if(e.X>t.X&&0===t.X)return"right";if(e.X<t.X&&0===e.X)return"left";if(e.Y>t.Y&&0===t.Y)return"up";if(e.Y<t.Y&&0===e.Y)return"down"}return"right"}var vr={options:null,grid:[],frames:[],endEvent:{},paused:!0,gameNotFound:!1,highlightedSnake:null,theme:W};function Or(e){if(window.parent)try{window.parent.postMessage(e,"*")}catch(t){console.error(t)}}var xr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case un:return Object(o.a)(Object(o.a)({},e),{},{theme:t.theme});case on:return t.gameOptions.turn=parseInt(t.gameOptions.turn)||0,t.gameOptions.loop=t.gameOptions.loop&&"true"===t.gameOptions.loop,Object(o.a)(Object(o.a)({},e),{},{gameOptions:t.gameOptions});case dn:return Object(o.a)(Object(o.a)({},e),{},{gameNotFound:!0});case mn:return Object(o.a)(Object(o.a)({},e),{},{paused:!0});case ln:return Or({action:t.type,endEvent:t.endEvent}),Object(o.a)(Object(o.a)({},e),{},{paused:!0});case gn:return Object(o.a)(Object(o.a)({},e),{},{paused:!1});case bn:return Or({action:t.type,frame:hr(t.frame)}),Object(o.a)(Object(o.a)({},e),{},{currentFrame:t.frame});case fn:var n=dr(t.frame);return Object(o.a)(Object(o.a)({},e),{},{ruleset:t.game.Game.Ruleset,grid:{height:t.game.Game.Height,width:t.game.Game.Width},frames:[].concat(Object(V.a)(e.frames),[n])});case vn:return Object(o.a)(Object(o.a)({},e),{},{endEvent:t.endEvent,frames:[].concat(Object(V.a)(e.frames),[t.frame])});case pn:case hn:return Object(o.a)({},e);case jn:return Or({action:t.type,id:t.snakeId,name:t.snakeId?e.currentFrame.snakes.find((function(e){return e._id===t.snakeId})).name:null}),Object(o.a)(Object(o.a)({},e),{},{highlightedSnake:t.snakeId});case On:return Or({action:t.type,value:t.showHide}),Object(o.a)({},e);case xn:return Or({action:t.type,value:t.theme}),Object(o.a)({},e);default:return Object(o.a)({},e)}};var yr=Object(An.a)({reducer:{game:xr,settings:qn},middleware:function(e){return e({immutableCheck:!1,serializableCheck:!1})},preloadedState:function(){var e={game:{options:null,grid:[],frames:[],endEvent:null,paused:!0,gameNotFound:!1,highlightedSnake:null,theme:W},settings:yn};return Rn("localStorage")?(e.settings=function(){var e=Hn("autoplay"),t=Hn("showFrameScrubber"),n=Hn("showCoordinateLabels");return e="undefined"===typeof e?yn.autoplay:"true"===e,t="undefined"===typeof t?yn.showFrameScrubber:"true"===t,n="undefined"===typeof n?yn.showCoordinateLabels:"true"===n,{frameRate:Number(Hn("frameRate"))||6,theme:Hn("theme")||yn.theme,showFrameScrubber:t,autoplay:e,showCoordinateLabels:n}}(),e.settings.persistAvailable=!0):console.info("Please enable localStorage for an improved experience that allows you to persist board settings."),e}()});yr.subscribe((function(){var e;(e=yr.getState()).settings.frameRate!==Hn("frameRate")&&Pn("frameRate",e.settings.frameRate),e.settings.theme!==Hn("theme")&&Pn("theme",e.settings.theme),e.settings.autoplay!==Hn("autoplay")&&Pn("autoplay",e.settings.autoplay),e.settings.showFrameScrubber!==Hn("showFrameScrubber")&&Pn("showFrameScrubber",e.settings.showFrameScrubber),e.settings.showCoordinateLabels!==Hn("showCoordinateLabels")&&Pn("showCoordinateLabels",e.settings.showCoordinateLabels)}));var wr=yr,kr=n(25);Object(i.render)(Object(v.jsx)(c.a,{store:wr,children:Object(v.jsx)(kr.a,{children:Object(v.jsx)(ir,{})})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.025cfca5.chunk.js.map